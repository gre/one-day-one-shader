_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{"/2Hx":function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSG",(function(){return m})),r.d(t,"Capture",(function(){return x})),r.d(t,"Previewing",(function(){return O})),r.d(t,"default",(function(){return v}));var n=r("nKUr"),c=r("g4pe"),a=r.n(c),i=r("YFqc"),o=r.n(i),s=(r("20a2"),r("7ZeU")),l=r("q1tI"),f=r("e0Q9"),u=r("rr/c"),b=r("TKux"),d=(r("GL4Q"),r("ieaa"),r("8O5I"),r("W9HR"),r("tXdy"),r("rQ2n")),h=r("ZzT5"),w=r("hmBY"),y=r("MX0m"),p=r.n(y);function j({Day:e}){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{className:"jsx-1224002593 description",children:[Object(n.jsx)(o.a,{href:`/${e.n}`,children:Object(n.jsxs)("a",{className:"jsx-1224002593",children:["Day ",e.n,"."]})})," ",Object(n.jsxs)("span",{className:"jsx-1224002593 daily",children:['"',e.title,'"']})," by"," ",Object(n.jsx)("a",{href:"https://twitter.com/greweb",target:"_blank",className:"jsx-1224002593",children:"@greweb"})]}),Object(n.jsxs)("nav",{className:"jsx-1224002593",children:[Object(b.a)(e.n-1)?Object(n.jsx)(o.a,{href:"/export/"+(e.n-1),children:Object(n.jsx)("a",{className:"jsx-1224002593",children:"\u2190 previous day"})}):Object(n.jsx)("span",{className:"jsx-1224002593"}),Object(b.a)(e.n+1)?Object(n.jsx)(o.a,{href:`/export/${e.n+1}`,children:Object(n.jsx)("a",{className:"jsx-1224002593",children:"next day \u2192"})}):null]}),Object(n.jsx)(p.a,{id:"1224002593",children:[".description.jsx-1224002593{text-align:center;line-height:1.3rem;font-size:1.3rem;font-weight:300;}",".description.jsx-1224002593 .daily.jsx-1224002593{font-weight:600;}","nav.jsx-1224002593{width:400px;font-size:0.6em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}var g=r("b0oO");var m=!0;function x({format:e,n:t,Day:r,onFinished:c,size:a,start:i,end:o,framePerSecond:b,speed:d}){const h=Object(l.useRef)(),w=Math.floor((o-i)*b/d),{0:y,1:p}=Object(l.useState)(0),{0:j,1:g}=Object(l.useState)(!1),m=i+y/w*(o-i),{0:x}=Object(l.useState)((()=>{let t,n,a,i,o,l=0,f=!1;return{onDraw:()=>{if(f)if("gif"===e){const{width:e,height:r,data:i}=function(){const e=h.current.capture(),{shape:[t,r]}=e,n=new Uint8Array(t*r*4);for(let c=0;c<t;c++)for(let a=0;a<r;a++)for(let i=0;i<4;i++)n[4*(r*c+a)+i]=e.data[4*(r*(t-c-1)+a)+i];return{width:r,height:t,data:n}}();a||(a=Object(s.GIFEncoder)()),t=Object(s.quantize)(i,256),n=Object(s.applyPalette)(i,t),a.writeFrame(n,e,r,{palette:t,delay:1e3/b}),l>=w?(a.finish(),c(new Blob([a.bytes()],{type:"image/gif"}))):p(++l)}else{i||(i=new Worker("/ffmpeg-worker-mp4.js"),o=[]);const e=function(e){var t=e.replace(/^data[^,]+,/,""),r=window.atob(t),n=r.length,c=new Uint8Array(new ArrayBuffer(n));for(let a=0;a<n;a++)c[a]=r.charCodeAt(a);return c}(h.current.captureAsDataURL("image/jpeg",1));if(o.push({name:"img"+l.toString().padStart(4,0)+".jpeg",data:e}),l>=w){Date.now();i.onmessage=function(e){var t=e.data;switch(t.type){case"stdout":case"stderr":console.log(t.data);break;case"exit":console.log("Process exited with code "+t.data);break;case"done":console.log("reached done");const e=new Blob([t.data.MEMFS[0].data],{type:"video/mp4"});c(e)}},i.postMessage({type:"run",TOTAL_MEMORY:268435456,arguments:["-r",String(b),"-i","img%04d.jpeg","-c:v","libx264","-crf","1","-pix_fmt","yuv420p","-vb",r.exportMP4vb||"5M","out.mp4"],MEMFS:o})}else p(++l)}},onLoad:()=>{f=!0,g(!0)}}}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.Surface,{webglContextAttributes:{preserveDrawingBuffer:!0},onLoad:x.onLoad,ref:h,width:a,height:a,pixelRatio:1,children:Object(n.jsx)(u.NearestCopy,{onDraw:x.onDraw,children:Object(n.jsx)(r.Shader,{exporting:!0,time:m,n:t})})}),y+" / "+w]})}function O({n:e,Day:t,start:r,end:c,framePerSecond:a,speed:i}){const{0:o,1:s}=Object(l.useState)(0);Object(l.useEffect)((()=>{let e,t,r;return r=requestAnimationFrame((function n(c){r=requestAnimationFrame(n),e||(t=e=c),c-t>=1e3/a&&(t=c,s((c-e)/1e3))})),()=>cancelAnimationFrame(r)}),[]);const u=r+i*o%(c-r);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.Surface,{width:400,height:400,children:Object(n.jsx)(t.Shader,{exporting:!0,time:u,n:e})}),u.toFixed(3)]})}function v({day:e}){const{0:t,1:r}=Object(l.useState)(0),{0:c,1:i}=Object(l.useState)(),o=Object(b.a)(parseInt(e,10));if(!o)return null;const s=o.exportStart||0,f=o.exportEnd||1,u=o.exportFramePerSecond||24,y=o.exportSpeed||1,p=o.exportSize||800;return Object(n.jsx)(h.a,{children:Object(n.jsxs)(d.a,{children:[Object(n.jsxs)(a.a,{children:[Object(n.jsxs)("title",{children:["One Day One Shader \u2013 Day ",o.n,'. "',o.title,'"']}),Object(n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(g.a,{children:"Export tools"}),Object(n.jsx)(j,{Day:o}),c?Object(n.jsx)(x,{format:c,n:t,start:s,end:f,framePerSecond:u,speed:y,size:p,Day:o,onFinished:function(r){!function(e,t){const r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,n.click()}(r,"shaderday_"+e+"_"+t+"."+c),i(null)}}):Object(n.jsx)(O,{n:t,start:s,end:f,framePerSecond:u,speed:y,Day:o}),Object(n.jsx)("input",{style:{margin:10},value:t,range:1,onChange:e=>r(parseInt(e.target.value,10)),type:"number"}),Object(n.jsx)("button",{onClick:()=>i("gif"),children:"gif"}),Object(n.jsx)("button",{onClick:()=>i("mp4"),children:"mp4"})]})]})})}},"20a2":function(e,t,r){e.exports=r("nOHt")},"7ZeU":function(e,t){var r=Object.defineProperty;r(t,"__esModule",{value:!0}),((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(t,{GIFEncoder:()=>S,applyPalette:()=>j,default:()=>U,nearestColor:()=>B,nearestColorIndex:()=>v,nearestColorIndexWithDistance:()=>A,prequantize:()=>p,quantize:()=>d,snapColorsToPalette:()=>x});var n=59;function c(e=256){let t=0,r=new Uint8Array(e);return{get buffer(){return r.buffer},reset(){t=0},bytesView:()=>r.subarray(0,t),bytes:()=>r.slice(0,t),writeByte(e){n(t+1),r[t]=e,t++},writeBytes(e,c=0,a=e.length){n(t+a);for(let n=0;n<a;n++)r[t++]=e[n+c]},writeBytesView(e,c=0,a=e.byteLength){n(t+a),r.set(e.subarray(c,c+a),t),t+=a}};function n(e){var n=r.length;if(n>=e)return;e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));const c=r;r=new Uint8Array(e),t>0&&r.set(c.subarray(0,t),0)}}var a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];var i=function(e,t,r,n,i=c(512),o=new Uint8Array(256),s=new Int32Array(5003),l=new Int32Array(5003)){const f=s.length,u=Math.max(2,n);o.fill(0),l.fill(0),s.fill(-1);let b=0,d=0;const h=u+1,w=h;let y=!1,p=w,j=(1<<p)-1;const g=1<<h-1,m=g+1;let x=g+2,O=0,v=r[0],A=0;for(let c=f;c<65536;c*=2)++A;A=8-A,i.writeByte(u),S(g);const B=r.length;for(let c=1;c<B;c++)e:{const e=r[c],t=(e<<12)+v;let n=e<<A^v;if(s[n]===t){v=l[n];break e}const a=0===n?1:f-n;for(;s[n]>=0;)if(n-=a,n<0&&(n+=f),s[n]===t){v=l[n];break e}S(v),v=e,x<4096?(l[n]=x++,s[n]=t):(s.fill(-1),x=g+2,y=!0,S(g))}return S(v),S(m),i.writeByte(0),i.bytesView();function S(e){for(b&=a[d],d>0?b|=e<<d:b=e,d+=p;d>=8;)o[O++]=255&b,O>=254&&(i.writeByte(O),i.writeBytesView(o,0,O),O=0),b>>=8,d-=8;if((x>j||y)&&(y?(p=w,j=(1<<p)-1,y=!1):(++p,j=12===p?1<<p:(1<<p)-1)),e==m){for(;d>0;)o[O++]=255&b,O>=254&&(i.writeByte(O),i.writeBytesView(o,0,O),O=0),b>>=8,d-=8;O>0&&(i.writeByte(O),i.writeBytesView(o,0,O),O=0)}}};function o(e,t,r){return e<<8&63488|t<<2&992|r>>3}function s(e,t,r,n){return e>>4|240&t|(240&r)<<4|(240&n)<<8}function l(e,t,r){return e>>4<<8|240&t|r>>4}function f(e,t,r){return e<t?t:e>r?r:e}function u(e){return e*e}function b(e,t,r){var n=0,c=1e100;const a=e[t],i=a.cnt,o=a.ac,s=a.rc,l=a.gc,f=a.bc;for(var b=a.fw;0!=b;b=e[b].fw){const t=e[b],a=t.cnt,h=i*a/(i+a);if(!(h>=c)){var d=0;r&&(d+=h*u(t.ac-o))>=c||(d+=h*u(t.rc-s))>=c||(d+=h*u(t.gc-l))>=c||(d+=h*u(t.bc-f))>=c||(c=d,n=b)}}a.err=c,a.nn=n}function d(e,t,r={}){const{format:n="rgb565",clearAlpha:c=!0,clearAlphaColor:a=0,clearAlphaThreshold:i=0,oneBitAlpha:d=!1}=r;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");const w=new Uint32Array(e.buffer);let y=!1!==r.useSqrt;const p="rgba4444"===n,j=function(e,t){const r=new Array("rgb444"===t?4096:65536),n=e.length;if("rgba4444"===t)for(let c=0;c<n;++c){const t=e[c],n=t>>24&255,a=t>>16&255,i=t>>8&255,o=255&t,l=s(o,i,a,n);let f=l in r?r[l]:r[l]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};f.rc+=o,f.gc+=i,f.bc+=a,f.ac+=n,f.cnt++}else if("rgb444"===t)for(let c=0;c<n;++c){const t=e[c],n=t>>16&255,a=t>>8&255,i=255&t,o=l(i,a,n);let s=o in r?r[o]:r[o]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};s.rc+=i,s.gc+=a,s.bc+=n,s.cnt++}else for(let c=0;c<n;++c){const t=e[c],n=t>>16&255,a=t>>8&255,i=255&t,s=o(i,a,n);let l=s in r?r[s]:r[s]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};l.rc+=i,l.gc+=a,l.bc+=n,l.cnt++}return r}(w,n),g=j.length,m=g-1,x=new Uint32Array(g+1);for(var O=0,v=0;v<g;++v){const e=j[v];if(null!=e){var A=1/e.cnt;p&&(e.ac*=A),e.rc*=A,e.gc*=A,e.bc*=A,j[O++]=e}}u(t)/O<.022&&(y=!1);var B,S,k;for(v=0;v<O-1;++v)j[v].fw=v+1,j[v+1].bk=v,y&&(j[v].cnt=Math.sqrt(j[v].cnt));for(y&&(j[v].cnt=Math.sqrt(j[v].cnt)),v=0;v<O;++v){b(j,v,!1);var M=j[v].err;for(S=++x[0];S>1&&!(j[B=x[k=S>>1]].err<=M);S=k)x[S]=B;x[S]=v}var E=O-t;for(v=0;v<E;){for(var P;;){var U=x[1];if((P=j[U]).tm>=P.mtm&&j[P.nn].mtm<=P.tm)break;P.mtm==m?U=x[1]=x[x[0]--]:(b(j,U,!1),P.tm=v);M=j[U].err;for(S=1;(k=S+S)<=x[0]&&(k<x[0]&&j[x[k]].err>j[x[k+1]].err&&k++,!(M<=j[B=x[k]].err));S=k)x[S]=B;x[S]=U}var D=j[P.nn],F=P.cnt,_=D.cnt;A=1/(F+_);p&&(P.ac=A*(F*P.ac+_*D.ac)),P.rc=A*(F*P.rc+_*D.rc),P.gc=A*(F*P.gc+_*D.gc),P.bc=A*(F*P.bc+_*D.bc),P.cnt+=D.cnt,P.mtm=++v,j[D.bk].fw=D.fw,j[D.fw].bk=D.bk,D.mtm=m}let q=[];var C=0;for(v=0;;++C){let e=f(Math.round(j[v].rc),0,255),t=f(Math.round(j[v].gc),0,255),r=f(Math.round(j[v].bc),0,255),n=255;if(p){if(n=f(Math.round(j[v].ac),0,255),d){n=n<=("number"===typeof d?d:127)?0:255}c&&n<=i&&(e=t=r=a,n=0)}const o=p?[e,t,r,n]:[e,t,r];if(h(q,o)||q.push(o),0==(v=j[v].fw))break}return q}function h(e,t){for(let r=0;r<e.length;r++){const n=e[r];let c=n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2],a=!(n.length>=4&&t.length>=4)||n[3]===t[3];if(c&&a)return!0}return!1}function w(e,t){var r,n=0;for(r=0;r<e.length;r++){const c=e[r]-t[r];n+=c*c}return n}function y(e,t){return t>1?Math.round(e/t)*t:e}function p(e,{roundRGB:t=5,roundAlpha:r=10,oneBitAlpha:n=null}={}){const c=new Uint32Array(e.buffer);for(let a=0;a<c.length;a++){const e=c[a];let i=e>>24&255,o=e>>16&255,s=e>>8&255,l=255&e;if(i=y(i,r),n){i=i<=("number"===typeof n?n:127)?0:255}l=y(l,t),s=y(s,t),o=y(o,t),c[a]=i<<24|o<<16|s<<8|l<<0}}function j(e,t,r="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(t.length>256)throw new Error("applyPalette() only works with 256 colors or less");const n=new Uint32Array(e.buffer),c=n.length,a="rgb444"===r?4096:65536,i=new Uint8Array(c),f=new Array(a);if("rgba4444"===r)for(let o=0;o<c;o++){const e=n[o],r=e>>24&255,c=e>>16&255,a=e>>8&255,l=255&e,u=s(l,a,c,r),b=u in f?f[u]:f[u]=g(l,a,c,r,t);i[o]=b}else{const e="rgb444"===r?l:o;for(let r=0;r<c;r++){const c=n[r],a=c>>16&255,o=c>>8&255,s=255&c,l=e(s,o,a),u=l in f?f[l]:f[l]=m(s,o,a,t);i[r]=u}}return i}function g(e,t,r,n,c){let a=0,i=1e100;for(let o=0;o<c.length;o++){const s=c[o];let l=O(s[3]-n);if(l>i)continue;if(l+=O(s[0]-e),l>i)continue;if(l+=O(s[1]-t),l>i)continue;l+=O(s[2]-r),l>i||(i=l,a=o)}return a}function m(e,t,r,n){let c=0,a=1e100;for(let i=0;i<n.length;i++){const o=n[i];let s=O(o[0]-e);if(s>a)continue;if(s+=O(o[1]-t),s>a)continue;s+=O(o[2]-r),s>a||(a=s,c=i)}return c}function x(e,t,r=5){if(!e.length||!t.length)return;const n=e.map((e=>e.slice(0,3))),c=r*r,a=e[0].length;for(let i=0;i<t.length;i++){let r=t[i];r=r.length<a?[r[0],r[1],r[2],255]:r.length>a?r.slice(0,3):r.slice();const o=A(n,r.slice(0,3),w),s=o[0],l=o[1];l>0&&l<=c&&(e[s]=r)}}function O(e){return e*e}function v(e,t,r=w){let n=1/0,c=-1;for(let a=0;a<e.length;a++){const i=r(t,e[a]);i<n&&(n=i,c=a)}return c}function A(e,t,r=w){let n=1/0,c=-1;for(let a=0;a<e.length;a++){const i=r(t,e[a]);i<n&&(n=i,c=a)}return[c,n]}function B(e,t,r=w){return e[v(e,t,r)]}function S(e={}){const{initialCapacity:t=4096,auto:r=!0}=e,a=c(t),o=new Uint8Array(256),s=new Int32Array(5003),l=new Int32Array(5003);let f=!1;return{reset(){a.reset(),f=!1},finish(){a.writeByte(n)},bytes:()=>a.bytes(),bytesView:()=>a.bytesView(),get buffer(){return a.buffer},get stream(){return a},writeHeader:u,writeFrame(e,t,n,c={}){const{transparent:b=!1,transparentIndex:d=0,delay:h=0,palette:w=null,repeat:y=0,colorDepth:p=8,dispose:j=-1}=c;let g=!1;if(r?f||(g=!0,u(),f=!0):g=Boolean(c.first),t=Math.max(0,Math.floor(t)),n=Math.max(0,Math.floor(n)),g){if(!w)throw new Error("First frame must include a { palette } option");!function(e,t,r,n,c=8){const a=1,i=0,o=P(n.length)-1,s=a<<7|c-1<<4|i<<3|o,l=0,f=0;M(e,t),M(e,r),e.writeBytes([s,l,f])}(a,t,n,w,p),k(a,w),y>=0&&function(e,t){e.writeByte(33),e.writeByte(255),e.writeByte(11),E(e,"NETSCAPE2.0"),e.writeByte(3),e.writeByte(1),M(e,t),e.writeByte(0)}(a,y)}const m=Math.round(h/10);!function(e,t,r,n,c){e.writeByte(33),e.writeByte(249),e.writeByte(4),c<0&&(c=0,n=!1);var a,i;n?(a=1,i=2):(a=0,i=0);t>=0&&(i=7&t);i<<=2;const o=0;e.writeByte(0|i|o|a),M(e,r),e.writeByte(c||0),e.writeByte(0)}(a,j,m,b,d);const x=Boolean(w)&&!g;!function(e,t,r,n){if(e.writeByte(44),M(e,0),M(e,0),M(e,t),M(e,r),n){const t=0,r=0,c=P(n.length)-1;e.writeByte(128|t|r|0|c)}else e.writeByte(0)}(a,t,n,x?w:null),x&&k(a,w),function(e,t,r,n,c=8,a,o,s){i(r,n,t,c,e,a,o,s)}(a,e,t,n,p,o,s,l)}};function u(){E(a,"GIF89a")}}function k(e,t){const r=1<<P(t.length);for(let n=0;n<r;n++){let r=[0,0,0];n<t.length&&(r=t[n]),e.writeByte(r[0]),e.writeByte(r[1]),e.writeByte(r[2])}}function M(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function E(e,t){for(var r=0;r<t.length;r++)e.writeByte(t.charCodeAt(r))}function P(e){return Math.max(Math.ceil(Math.log2(e)),1)}var U=S},Apn4:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/export/[day]",function(){return r("/2Hx")}])},GL4Q:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("nKUr"),c=r("cpVT");function a(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var i=r("q1tI"),o=r("e0Q9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const l=e=>{let{Day:t}=e,r=a(e,["Day"]);const{0:o,1:l}=Object(i.useState)(0);return Object(i.useEffect)((()=>{let e,t;return t=requestAnimationFrame((function r(n){t=requestAnimationFrame(r),e||(e=n),l((n-e)/1e3)})),()=>cancelAnimationFrame(t)}),[]),Object(n.jsx)(t.Shader,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({time:o},r))};function f({Day:e}){const{0:t,1:r}=Object(i.useState)(0);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.Surface,{width:400,height:400,children:Object(n.jsx)(l,{Day:e,n:t},e.n)}),null]})}}},[["Apn4",0,1,2,3,4,5,6]]]);